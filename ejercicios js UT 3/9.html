<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Ejericio 9</title>

        <script>
            //fechaLocal, fecha, dias, meses, diaDelMes, diaCalculado; //variables que usaremos.

            fechaLocal = "1/" + pedirFecha() //pedirfecha solo pide el mes y el año

            fecha = new Date(convertirFecha(fechaLocal));

            dias = ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"]
            meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"]

            diaDelMes = fecha.getDate()

            while(diaDelMes <= ultimoDiaDelMes(fecha)){
                diaCalculado = fecha.getDay()

                document.write(diaDelMes + " de " + meses[fecha.getMonth()] + " de " + fecha.getFullYear() + " ---> " + dias[diaCalculado]);
                document.write("<br>")
                diaDelMes++
                fecha.setDate(fecha.getDate()+1);
            }

            

            function pedirFecha(){
                
                //he reutilizado todo el código del ejercicio 5

                const rex = /[0-9]{2}[-/.]{1}[0-9]{4}$/
                fechaValida=false


                while(!fechaValida){
                    fecha = prompt("Escriba un mes y un año. Formato (mm/aaaa)")
                

                    if(rex.test(fecha)){

                        array = fecha.split(/[./-]/) // hago un split cuando encuentre un . una barra o un guión.

                            if(array[0] > 12){
                                // el mes no puede ser mayor a 12
                                alert("Debe escribir una fecha válida.")
                            }
                            else{
                                fechaValida=true //detenemos el bucle, ya tenemos un input válido.
                                fecha = array[0] + "/" + array[1];
                            
                            }

                    }

                    else{
                        alert("Debe escribir una fecha válida.")
                    }
                }

                return fecha;
            }

            function convertirFecha(fecha){
                arrayDatos = fecha.split("/")
                fechaFormateada = arrayDatos[1] + "/" + arrayDatos[0] + "/" + arrayDatos[2];


                return fechaFormateada
            }
        
            function ultimoDiaDelMes(fecha) {
                //esta función devuelve el último día del mes de la fecha introducida, para febrero 28, octubre 31, etc.
                mes = fecha.getMonth();
                año = fecha.getFullYear();
                dia1proxMes = new Date(año, mes + 1, 1);
                let ultimoDiaDelMes = new Date(dia1proxMes - 1);

                return ultimoDiaDelMes.getDate();
            }

        </script>

    </head>

    <body>

    </body>

</html>